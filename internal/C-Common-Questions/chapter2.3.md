### 2.3 怎样定义和声明全局变量和函数最好？
首先, 尽管一个全局变量或函数可以 (在多个编译单元中) 有多处 ``声明'', 但是 ``定义'' 却只能允许出现一次。定义是分配空间并赋初值 (如果有) 的声 明。最好的安排是在某个相关的 .c 文件中定义, 然后在头文件  (.h) 中进行外部声明, 在需要使用的时候, 只要包含对应的头文 件即可。定义变量的 .c 文件也应该包含该头文件, 以便编译器 检查定义和声明的一致性。
这条规则提供了高度的可移植性: 它和 ANSI C 标准一致, 同时也兼容大多数  ANSI 前的编译器和连接器。Unix 编译器和连接器通常使用 ``通用模式'' 允许多重定义, 只要保证最多对一处进行初始化就可以了; ANSI C 标准称 这种行为为 ``公共扩展'', 没有语带双关的意思。

可以使用预处理技巧来使类似

	DEFINE(int, i);
的语句在一个头文件中只出现一次, 然后根据某个宏的设定在需要的时候转化 成定义或声明。但不清楚这样的麻烦是否值得。
如果希望让编译器检查声明的一致性, 一定要把全局声明放到头文件中。特别 是, 永远不要把外部函数的原型放到 .c 文件中: 通常它与定义的一 致性不能得到检查, 而矛盾的原型比不用还糟糕。

参见问题 10.4 和 18.6。


